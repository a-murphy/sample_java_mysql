language: java

jdk:
   - openjdk7

#services:
#  - mysql
  
#env:
#  -  MVN_VERSION=$(mvn -q -Dexec.executable="echo" -Dexec.args='${project.version}' --non-recursive org.codehaus.mojo:exec-maven-plugin:1.3.1:exec)

build:
  ci:
    - shippable_retry npm install
    - shippable_retry npm run build
    - if [ "$BRANCH" == "master" ]; then IMAGE_NAME="amurphy/master:latest"; else IMAGE_NAME="amurphy/August-2017:latest"; fi
    - docker build -t $IMAGE_NAME .
   # - docker push $IMAGE_NAME
    - echo "versionName=latest" >> $JOB_STATE/shipdemo-img-$BRANCH.env
    - echo "buildNumber=$BUILD_NUMBER" >> $JOB_STATE/shipdemo-img-$BRANCH.env
 
notifications:
  email: false

